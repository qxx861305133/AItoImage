{"remainingRequest":"/Users/qinxiaoxiong/AIDemo/AItoImage/hello-world/node_modules/babel-loader/lib/index.js!/Users/qinxiaoxiong/AIDemo/AItoImage/hello-world/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/qinxiaoxiong/AIDemo/AItoImage/hello-world/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/qinxiaoxiong/AIDemo/AItoImage/hello-world/src/components/Index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/qinxiaoxiong/AIDemo/AItoImage/hello-world/src/components/Index.vue","mtime":1684417176360},{"path":"/Users/qinxiaoxiong/AIDemo/AItoImage/hello-world/babel.config.js","mtime":1684416689616},{"path":"/Users/qinxiaoxiong/AIDemo/AItoImage/hello-world/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/qinxiaoxiong/AIDemo/AItoImage/hello-world/node_modules/babel-loader/lib/index.js","mtime":456789000000},{"path":"/Users/qinxiaoxiong/AIDemo/AItoImage/hello-world/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/qinxiaoxiong/AIDemo/AItoImage/hello-world/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCBhbm55YW5nIGZyb20gJ2FubnlhbmcnOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHJlY29nbml6ZWRUZXh0OiAnJywKICAgICAgaW1nTGlzdDogW10KICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBzdGFydFJlY29nbml0aW9uKCkgewogICAgICBpZiAoYW5ueWFuZykgewogICAgICAgIHRoaXMubG9hZEltYWdlcygpOwogICAgICAgIGFubnlhbmcuc3RhcnQoewogICAgICAgICAgYXV0b1Jlc3RhcnQ6IGZhbHNlLAogICAgICAgICAgY29udGludW91czogZmFsc2UKICAgICAgICB9KTsKICAgICAgICAvLyDorr7nva7or4bliKvor63oqIDkuLrkuK3mlocKICAgICAgICBhbm55YW5nLnNldExhbmd1YWdlKCd6aC1DTicpOwogICAgICAgIGFubnlhbmcuYWRkQ2FsbGJhY2soJ3Jlc3VsdCcsIHBocmFzZXMgPT4gewogICAgICAgICAgY29uc29sZS5sb2coJ3BocmFzZXMnLCBwaHJhc2VzKTsKICAgICAgICAgIGlmIChwaHJhc2VzICYmIHBocmFzZXMubGVuZ3RoID4gMCkgewogICAgICAgICAgICB0aGlzLnJlY29nbml6ZWRUZXh0ID0gcGhyYXNlc1swXTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnJlY29nbml6ZWRUZXh0ID0gJ1dlYiBTcGVlY2ggQVBJIG5vdCBzdXBwb3J0ZWQnOwogICAgICB9CiAgICB9LAogICAgbG9hZEltYWdlcygpIHsKICAgICAgY29uc3QgZm9sZGVyUGF0aCA9IHJlcXVpcmUuY29udGV4dCgnLi4vYXNzZXRzL2ltYWdlcy9yZXN1bHQnLCBmYWxzZSwgL1wuKHBuZ3xqcGU/Z3xnaWZ8c3ZnKSQvKTsKICAgICAgY29uc3QgaW1hZ2VzID0gZm9sZGVyUGF0aC5rZXlzKCkubWFwKGtleSA9PiBmb2xkZXJQYXRoKGtleSkpOwogICAgICB0aGlzLmltZ0xpc3QgPSBpbWFnZXM7CiAgICAgIC8vIC8vIOacrOWcsOmdmeaAgeaWh+S7tuWkuei3r+W+hAogICAgICAvLyBjb25zdCBmb2xkZXJQYXRoID0gJy4uL2Fzc2V0cy9yZXN1bHQtbGlzdCc7CiAgICAgIC8vIC8vIOS9v+eUqHJlcXVpcmUuY29udGV4dOadpeWKqOaAgeWKoOi9veaWh+S7tuWkueS4i+eahOaJgOacieWbvueJhwogICAgICAvLyBjb25zdCBpbWFnZXMgPSByZXF1aXJlLmNvbnRleHQoZm9sZGVyUGF0aCwgZmFsc2UsIC9cLihwbmd8anBlP2d8Z2lmfHN2ZykkLyk7CiAgICAgIC8vIC8vIOmBjeWOhuWKoOi9veWbvueJh+W5tuWwhui3r+W+hOa3u+WKoOWIsGltYWdlc+aVsOe7hAogICAgICAvLyBpbWFnZXMua2V5cygpLmZvckVhY2goKGtleSkgPT4gewogICAgICAvLyAgIGNvbnN0IGltYWdlUGF0aCA9IGltYWdlcyhrZXkpOwogICAgICAvLyAgIHRoaXMuaW1nTGlzdC5wdXNoKGltYWdlUGF0aCk7CiAgICAgIC8vIH0pCiAgICAgIHRoaXMub2JzZXJ2ZUltYWdlcygpOwogICAgfSwKICAgIG9ic2VydmVJbWFnZXMoKSB7CiAgICAgIGNvbnN0IGltYWdlcyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmxhenktaW1hZ2UnKSk7CiAgICAgIGNvbnN0IG9ic2VydmVyID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKGVudHJpZXMgPT4gewogICAgICAgIGVudHJpZXMuZm9yRWFjaChlbnRyeSA9PiB7CiAgICAgICAgICBpZiAoZW50cnkuaXNJbnRlcnNlY3RpbmcpIHsKICAgICAgICAgICAgY29uc3QgaW1hZ2VJbmRleCA9IHBhcnNlSW50KGVudHJ5LnRhcmdldC5kYXRhc2V0LmluZGV4KTsKICAgICAgICAgICAgdGhpcy5pbWdMaXN0W2ltYWdlSW5kZXhdLmlzVmlzaWJsZSA9IHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0sIHsKICAgICAgICByb290TWFyZ2luOiAnMHB4JywKICAgICAgICB0aHJlc2hvbGQ6IDAuMQogICAgICB9KTsKICAgICAgaW1hZ2VzLmZvckVhY2goaW1hZ2UgPT4gewogICAgICAgIG9ic2VydmVyLm9ic2VydmUoaW1hZ2UpOwogICAgICAgIHRoaXMuaW1nTGlzdC5wdXNoKHsKICAgICAgICAgIHNyYzogJycsCiAgICAgICAgICBhbHQ6ICcnLAogICAgICAgICAgaXNWaXNpYmxlOiBmYWxzZQogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICBpbWFnZUxvYWRlZChpbmRleCkgewogICAgICBjb25zdCBpbWFnZSA9IHRoaXMuaW1nTGlzdFtpbmRleF07CiAgICAgIGltYWdlLnNyYyA9IGltYWdlLm9yaWdpbmFsU3JjOwogICAgICBpbWFnZS5hbHQgPSBpbWFnZS5vcmlnaW5hbEFsdDsKICAgIH0KICB9LAogIGJlZm9yZURlc3Ryb3koKSB7CiAgICBpZiAoYW5ueWFuZykgewogICAgICBhbm55YW5nLmFib3J0KCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["annyang","data","recognizedText","imgList","methods","startRecognition","loadImages","start","autoRestart","continuous","setLanguage","addCallback","phrases","console","log","length","folderPath","require","context","images","keys","map","key","observeImages","Array","from","document","querySelectorAll","observer","IntersectionObserver","entries","forEach","entry","isIntersecting","imageIndex","parseInt","target","dataset","index","isVisible","rootMargin","threshold","image","observe","push","src","alt","imageLoaded","originalSrc","originalAlt","beforeDestroy","abort"],"sources":["src/components/Index.vue"],"sourcesContent":["<template>\n  <div>\n    <button @click=\"startRecognition\">开始识别</button>\n    <p>{{ recognizedText }}</p>\n    <ul class=\"flex-wrap img-box\">\n      <li v-for=\"item in imgList\" :key=\"item\">\n        <img\n          class=\"img-size\"\n          v-lazy=\"item\"\n        />\n      </li>\n    </ul>\n  </div>\n</template>\n\n<script>\nimport annyang from 'annyang';\n\nexport default {\n  data() {\n    return {\n      recognizedText: '',\n      imgList: []\n    };\n  },\n  methods: {\n    startRecognition() {\n      if (annyang) {\n        this.loadImages()\n        annyang.start({ autoRestart: false, continuous: false });\n        // 设置识别语言为中文\n        annyang.setLanguage('zh-CN');\n\n        annyang.addCallback('result', (phrases) => {\n          console.log('phrases', phrases)\n          if (phrases && phrases.length > 0) {\n            this.recognizedText = phrases[0];\n          }\n        });\n      } else {\n        this.recognizedText = 'Web Speech API not supported';\n      }\n    },\n    loadImages() {\n      const folderPath = require.context('../assets/images/result', false, /\\.(png|jpe?g|gif|svg)$/);\n      const images = folderPath.keys().map((key) => folderPath(key));\n      this.imgList = images;\n      // // 本地静态文件夹路径\n      // const folderPath = '../assets/result-list';\n      // // 使用require.context来动态加载文件夹下的所有图片\n      // const images = require.context(folderPath, false, /\\.(png|jpe?g|gif|svg)$/);\n      // // 遍历加载图片并将路径添加到images数组\n      // images.keys().forEach((key) => {\n      //   const imagePath = images(key);\n      //   this.imgList.push(imagePath);\n      // })\n      this.observeImages()\n    },\n    observeImages() {\n      const images = Array.from(document.querySelectorAll('.lazy-image'));\n\n      const observer = new IntersectionObserver(\n        (entries) => {\n          entries.forEach((entry) => {\n            if (entry.isIntersecting) {\n              const imageIndex = parseInt(entry.target.dataset.index);\n              this.imgList[imageIndex].isVisible = true;\n            }\n          });\n        },\n        {\n          rootMargin: '0px',\n          threshold: 0.1,\n        }\n      );\n\n      images.forEach(image => {\n        observer.observe(image);\n        this.imgList.push({\n          src: '',\n          alt: '',\n          isVisible: false,\n        });\n      });\n    },\n    imageLoaded(index) {\n      const image = this.imgList[index];\n      image.src = image.originalSrc;\n      image.alt = image.originalAlt;\n    },\n  },\n  beforeDestroy() {\n    if (annyang) {\n      annyang.abort();\n    }\n  },\n};\n</script>\n<style scoped>\n  .lazy-image {\n    opacity: 0;\n    transition: opacity 0.3s;\n  }\n  .lazy-image.is-visible {\n    opacity: 1;\n  }\n  .img-size {\n    width: 500px;\n    object-fit: contain;\n  }\n</style>\n"],"mappings":";AAgBA,OAAAA,OAAA;AAEA;EACAC,KAAA;IACA;MACAC,cAAA;MACAC,OAAA;IACA;EACA;EACAC,OAAA;IACAC,iBAAA;MACA,IAAAL,OAAA;QACA,KAAAM,UAAA;QACAN,OAAA,CAAAO,KAAA;UAAAC,WAAA;UAAAC,UAAA;QAAA;QACA;QACAT,OAAA,CAAAU,WAAA;QAEAV,OAAA,CAAAW,WAAA,WAAAC,OAAA;UACAC,OAAA,CAAAC,GAAA,YAAAF,OAAA;UACA,IAAAA,OAAA,IAAAA,OAAA,CAAAG,MAAA;YACA,KAAAb,cAAA,GAAAU,OAAA;UACA;QACA;MACA;QACA,KAAAV,cAAA;MACA;IACA;IACAI,WAAA;MACA,MAAAU,UAAA,GAAAC,OAAA,CAAAC,OAAA;MACA,MAAAC,MAAA,GAAAH,UAAA,CAAAI,IAAA,GAAAC,GAAA,CAAAC,GAAA,IAAAN,UAAA,CAAAM,GAAA;MACA,KAAAnB,OAAA,GAAAgB,MAAA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA,KAAAI,aAAA;IACA;IACAA,cAAA;MACA,MAAAJ,MAAA,GAAAK,KAAA,CAAAC,IAAA,CAAAC,QAAA,CAAAC,gBAAA;MAEA,MAAAC,QAAA,OAAAC,oBAAA,CACAC,OAAA;QACAA,OAAA,CAAAC,OAAA,CAAAC,KAAA;UACA,IAAAA,KAAA,CAAAC,cAAA;YACA,MAAAC,UAAA,GAAAC,QAAA,CAAAH,KAAA,CAAAI,MAAA,CAAAC,OAAA,CAAAC,KAAA;YACA,KAAAnC,OAAA,CAAA+B,UAAA,EAAAK,SAAA;UACA;QACA;MACA,GACA;QACAC,UAAA;QACAC,SAAA;MACA,CACA;MAEAtB,MAAA,CAAAY,OAAA,CAAAW,KAAA;QACAd,QAAA,CAAAe,OAAA,CAAAD,KAAA;QACA,KAAAvC,OAAA,CAAAyC,IAAA;UACAC,GAAA;UACAC,GAAA;UACAP,SAAA;QACA;MACA;IACA;IACAQ,YAAAT,KAAA;MACA,MAAAI,KAAA,QAAAvC,OAAA,CAAAmC,KAAA;MACAI,KAAA,CAAAG,GAAA,GAAAH,KAAA,CAAAM,WAAA;MACAN,KAAA,CAAAI,GAAA,GAAAJ,KAAA,CAAAO,WAAA;IACA;EACA;EACAC,cAAA;IACA,IAAAlD,OAAA;MACAA,OAAA,CAAAmD,KAAA;IACA;EACA;AACA"}]}